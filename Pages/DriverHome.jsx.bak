import React, { useState, useEffect } from 'react';
import { useNavigate } from 'react-router-dom';
import { createPageUrl } from '@/lib/utils';
import { base44 } from '@/api/base44Client';
import { Button } from '@/components/ui/button';
import { Card, CardContent } from '@/components/ui/card';
import { Switch } from '@/components/ui/switch';
import { MapPin, Navigation, DollarSign, Menu, User, Car } from 'lucide-react';
import { toast } from 'sonner';

export default function DriverHome() {
    const navigate = useNavigate();
    const [isOnline, setIsOnline] = useState(false);
    const [location, setLocation] = useState(null);

    const toggleOnline = () => {
        setIsOnline(!isOnline);
        toast.success(isOnline ? 'Te has desconectado' : 'Estás en línea');
    };

    return (
        <div className="min-h-screen bg-[#0F0F1A] text-white flex flex-col">
            {/* Header / Map Overlay */}
            <div className="absolute top-0 left-0 right-0 z-10 p-4">
                <div className="bg-[#1A1A2E]/90 backdrop-blur-md rounded-2xl p-4 shadow-lg border border-[#2D2D44] flex items-center justify-between">
                    <div className="flex items-center gap-3">
                        <Button variant="ghost" size="icon" className="rounded-full bg-[#252538]">
                            <Menu size={20} />
                        </Button>
                        <div className="flex flex-col">
                            <span className="font-bold">Gs. 125.500</span>
                            <span className="text-xs text-gray-400">Hoy</span>
                        </div>
                    </div>

                    <div className="flex items-center gap-3 bg-[#0F0F1A] rounded-full px-4 py-2 border border-[#2D2D44]">
                        <span className={`text-sm font-medium ${isOnline ? 'text-[#00D4B1]' : 'text-gray-400'}`}>
                            {isOnline ? 'En línea' : 'Desconectado'}
                        </span>
                        <Switch
                            checked={isOnline}
                            onCheckedChange={toggleOnline}
                            className="data-[state=checked]:bg-[#00D4B1]"
                        />
                    </div>
                </div>
            </div>

            {/* Map Placeholder */}
            <div className="flex-1 bg-[#1A1A2E] relative flex items-center justify-center">
                <div className="text-center p-6 opacity-50">
                    <MapPin size={48} className="mx-auto mb-4 text-[#00D4B1]" />
                    <p>Mapa en tiempo real</p>
                    <p className="text-sm">Esperando servicios...</p>
                </div>
            </div>

            {/* Bottom Actions */}
            <div className="bg-[#1A1A2E] border-t border-[#2D2D44] p-4 pb-8 rounded-t-3xl">
                <div className="grid grid-cols-4 gap-4">
                    <Button
                        variant="ghost"
                        className="flex flex-col h-auto gap-1 text-gray-400 hover:text-[#00D4B1]"
                        onClick={() => navigate(createPageUrl('DriverEarnings'))}
                    >
                        <DollarSign size={24} />
                        <span className="text-xs">Ganancias</span>
                    </Button>
                    <Button variant="ghost" className="flex flex-col h-auto gap-1 text-[#00D4B1]">
                        <Navigation size={24} />
                        <span className="text-xs">Mapa</span>
                    </Button>
                    <Button
                        variant="ghost"
                        className="flex flex-col h-auto gap-1 text-gray-400 hover:text-[#00D4B1]"
                        onClick={() => navigate(createPageUrl('DriverDocuments'))}
                    >
                        <Car size={24} />
                        <span className="text-xs">Vehículo</span>
                    </Button>
                    <Button variant="ghost" className="flex flex-col h-auto gap-1 text-gray-400 hover:text-[#00D4B1]">
                        <User size={24} />
                        <span className="text-xs">Perfil</span>
                    </Button>
                </div>
            </div>
        </div>
    );
}
